{"ast":null,"code":"import _asyncToGenerator from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import axios from'axios';import Header from'./Header.js';import jwt from'jsonwebtoken';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Notice(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),noticetitle=_useState4[0],setNoticetite=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),notice=_useState6[0],setNotice=_useState6[1];var noticePage=function noticePage(){window.location.href='/notice';};//Publish Notice\naxios({method:'get',url:'https://api.github.com/users/hacktivist123'});function publishNotice(_x){return _publishNotice.apply(this,arguments);}function _publishNotice(){_publishNotice=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return fetch('https://hms-nist.herokuapp.com/api/notice',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:name,noticetitle:noticetitle,notice:notice,notices:[]})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;if(data.status=='ok'){alert('Notice Published');}case 8:case\"end\":return _context.stop();}}},_callee);}));return _publishNotice.apply(this,arguments);}useEffect(function(){//useEffect react hook to tell React that \n//components need to do something on render\nvar token=localStorage.getItem('token');if(!token){var user=jwt.decode(token);// for authentication\nwindow.location.href=\"/login\";// history.push('/login'); //if authentication fails load the login page\n}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"section\",{class:\"box container-fluid\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Publish Notice\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:publishNotice,children:[/*#__PURE__*/_jsx(\"input\",{value:noticetitle,onChange:function onChange(e){return setNoticetite(e.target.value);},type:\"text\",placeholder:\"Notice Title\",class:\"input-control2 rounded-pill\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{value:name,onChange:function onChange(e){return setName(e.target.value);},type:\"text\",placeholder:\"Undersigned Name\",class:\"input-control2 rounded-pill\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{value:notice,onChange:function onChange(e){return setNotice(e.target.value);},type:\"text\",placeholder:\"Notice\",class:\"input-control2 rounded\",style:{height:\"150px\"},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"btn btn-dark rounded-pill input-control2\",type:\"submit\",placeholder:\"\\uF062 Publish\",value:\"Publish\",onClick:{noticePage:noticePage}})]})]})]});}export default Notice;","map":{"version":3,"names":["React","useEffect","useState","axios","Header","jwt","useHistory","Notice","name","setName","noticetitle","setNoticetite","notice","setNotice","noticePage","window","location","href","method","url","publishNotice","event","preventDefault","fetch","headers","body","JSON","stringify","notices","response","json","data","status","alert","token","localStorage","getItem","user","decode","e","target","value","height"],"sources":["/Users/sherlock/Desktop/HMS copy/client/src/components/Notice.js"],"sourcesContent":["import React, {useEffect,useState} from 'react'\nimport axios from 'axios'\nimport Header from './Header.js'\nimport jwt from 'jsonwebtoken'\nimport { useHistory } from 'react-router-dom'\n\nfunction Notice () {\n\n    const [name,setName] = useState('')\n    const [noticetitle,setNoticetite] = useState('')\n    const [notice,setNotice] = useState('')\n\n    const noticePage = () =>{\n        window.location.href='/notice';\n    }\n\n    //Publish Notice\n    axios({\n        method: 'get',\n        url: 'https://api.github.com/users/hacktivist123',\n      });\n\n    async function publishNotice(event){\n        event.preventDefault()\n        const response = await fetch('https://hms-nist.herokuapp.com/api/notice',{\n            method: 'POST',\n            headers: {\n                'Content-Type':'application/json',\n            },\n            body: JSON.stringify({\n                name,\n                noticetitle,\n                notice,\n                notices:[]\n            }),\n        })\n        const data=await response.json()\n        if (data.status == 'ok') {\n            alert('Notice Published')\n\t\t}\n    }\n\n    useEffect(() => { //useEffect react hook to tell React that \n        //components need to do something on render\n        const token = localStorage.getItem('token');\n        if(!token) {\n            const user = jwt.decode(token) // for authentication\n            window.location.href=\"/login\"\n            // history.push('/login'); //if authentication fails load the login page\n        }\n    })\n\n\n    return(\n        <div>\n        <Header />\n        <section class=\"box container-fluid\">\n            <h1>Publish Notice</h1>\n            <form onSubmit={publishNotice}>\n            <input\n\t\t\t\t\tvalue={noticetitle}\n                    onChange={(e) => setNoticetite(e.target.value)}\n                    type=\"text\"\n                    placeholder=\"Notice Title\"\n                    class=\"input-control2 rounded-pill\"\n                    required\n\t\t\t\t/>\n\t\t\t\t<br />\n                <input\n\t\t\t\t\tvalue={name}\n                    onChange={(e) => setName(e.target.value)}\n                    type=\"text\"\n                    placeholder=\"Undersigned Name\"\n                    class=\"input-control2 rounded-pill\"\n                    required\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<textarea\n\t\t\t\t\tvalue={notice}\n                    onChange ={(e) => setNotice(e.target.value)}\n                    type=\"text\"\n                    placeholder=\"Notice\"\n                    class=\"input-control2 rounded\"\n                    style={{height:\"150px\"}}\n                    required\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<input className=\"btn btn-dark rounded-pill input-control2\" type=\"submit\"  placeholder=\"&#xf062; Publish\" value=\"Publish\" onClick={{noticePage}}/>\n\t\t\t</form>\n            </section>\n\n        </div>\n    )\n}\n\nexport default Notice"],"mappings":"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"},"metadata":{},"sourceType":"module"}