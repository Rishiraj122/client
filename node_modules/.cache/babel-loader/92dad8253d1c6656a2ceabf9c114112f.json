{"ast":null,"code":"import _asyncToGenerator from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{useHistory}from\"react-router-dom\";import axios from'axios';import Header from'../components/Header.js';import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var item=[];var searchData=[];var email='';var studentDetails=/*#__PURE__*/function(_React$Component){_inherits(studentDetails,_React$Component);var _super=_createSuper(studentDetails);function studentDetails(props){var _this;_classCallCheck(this,studentDetails);_this=_super.call(this,props);_this.state={loading:true,person:null};_this.state={inputValue:''};return _this;}_createClass(studentDetails,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(x){var token,user,url,response,data,i,_i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://This Makes Sure That The Admin Has Logged In\ntoken=localStorage.getItem('token');if(!token){user=jwt.decode(token);// for authentication\nwindow.location=\"/login\";//if authentication fails load the login page\n}//\nurl=\"https://hms-nist.herokuapp.com/api/studentlogin\";_context.next=5;return fetch(url);case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;if(x!=null){for(i=0;i<data.user.length;i++){// This will search for the \n//particular student\nthis.setState({person:data,loading:false});if(data.user[i].roll==x||data.user[i].name.toLowerCase()==x.toLowerCase()||data.user[i].registration==x||data.user[i].phone==x||data.user[i].email==x){item.length=0;item.push(data.user[i]);// console.log(item[0]);\n}}}else if(x==null){//It will load everyone's data initially\nfor(_i=data.user.length-1;_i>=0;_i--){this.setState({person:data,loading:false});item.push(data.user[_i]);// console.log(data.user[0])\n}}case 10:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(_x){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"delete\",value:function(){var _delete2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value,value2,value3){var roll,room,rid,response,response2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:roll={roll:value};room={room:value2};rid={rid:value3};_context2.next=5;return axios.post('https://hms-nist.herokuapp.com/api/studentdelete',roll);case 5:response=_context2.sent;_context2.next=8;return axios.post('https://hms-nist.herokuapp.com/api/roomdeallocate',rid);case 8:response2=_context2.sent;window.location.reload(false);case 10:case\"end\":return _context2.stop();}}},_callee2);}));function _delete(_x2,_x3,_x4){return _delete2.apply(this,arguments);}return _delete;}()},{key:\"refreshPage\",value:function refreshPage(){window.location.reload();}},{key:\"updateInputValue\",value:function updateInputValue(evt){this.setState({inputValue:evt.target.value});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Student Details\"}),/*#__PURE__*/_jsx(\"input\",{className:\"search-bar rounded-pill\",id:\"number\",type:\"text\",placeholder:\" \\uF002  Search\",onChange:function onChange(evt){var x=evt.target.value;_this2.componentDidMount(x);}}),/*#__PURE__*/_jsx(\"button\",{class:\"clr-btn btn btn-dark rounded-pill\",onClick:this.refreshPage,children:\"Clear\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),this.state.loading||!this.state.person?/*#__PURE__*/_jsx(\"div\",{children:\"loading...\"}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"tbl\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"sortable css-serial table table-borderless table-sm\",style:{width:\"80%\",textAlign:\"center\",margin:\"1% auto\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:\"#46244C\",color:\"white\"},children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"E-mail\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Gender\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DOB\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Aadhar Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Roll Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Registration Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Block\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Room\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:item.map(function(student){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:student.name}),/*#__PURE__*/_jsx(\"td\",{children:student.phone}),/*#__PURE__*/_jsx(\"td\",{children:student.email}),/*#__PURE__*/_jsx(\"td\",{children:student.address}),/*#__PURE__*/_jsx(\"td\",{children:student.gender}),/*#__PURE__*/_jsx(\"td\",{children:student.dob}),/*#__PURE__*/_jsx(\"td\",{children:student.aadhar}),/*#__PURE__*/_jsx(\"td\",{children:student.roll}),/*#__PURE__*/_jsx(\"td\",{children:student.registration}),/*#__PURE__*/_jsx(\"td\",{children:student.block}),/*#__PURE__*/_jsx(\"td\",{children:student.rid}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-light\",style:{paddingTop:\"4%\",marginTop:\"5%\"},onDoubleClick:function onDoubleClick(){return _this2.delete(student.roll,student.room,student.rid);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-ban\"}),\" Remove\"]}),/*#__PURE__*/_jsx(\"br\",{})]})]});})})]})})})]});}}]);return studentDetails;}(React.Component);export{studentDetails as default};","map":{"version":3,"names":["React","useState","useHistory","axios","Header","jwt","item","searchData","email","studentDetails","props","state","loading","person","inputValue","x","token","localStorage","getItem","user","decode","window","location","url","fetch","response","json","data","i","length","setState","roll","name","toLowerCase","registration","phone","push","value","value2","value3","room","rid","post","response2","reload","evt","target","componentDidMount","refreshPage","width","textAlign","margin","backgroundColor","color","map","student","address","gender","dob","aadhar","block","paddingTop","marginTop","delete","Component"],"sources":["/Users/sherlock/Desktop/HMS copy/client/src/pages/StudentDetails.js"],"sourcesContent":["import React, { useState } from 'react';\nimport {useHistory} from \"react-router-dom\";\nimport axios from 'axios';\nimport Header from '../components/Header.js'\nimport jwt from 'jsonwebtoken'\n\nconst item=[];\nconst searchData=[];\nconst email='';\n\nexport default class studentDetails extends React.Component{\n\nconstructor(props){\n    super(props);\n    this.state={\n        inputValue:'',\n    };\n}\n\nstate={\n    loading: true,\n    person: null,\n}\n\nasync componentDidMount(x){\n\n\n    //This Makes Sure That The Admin Has Logged In\n    const token = localStorage.getItem('token');\n    if(!token) {\n        const user = jwt.decode(token) // for authentication\n        window.location=\"/login\"; //if authentication fails load the login page\n    }\n    //\n\n    const url=\"https://hms-nist.herokuapp.com/api/studentlogin\";\n    const response = await fetch(url);\n    \n    const data = await response.json();\n    if(x!=null){\n\n        for(let i=0;i<data.user.length;i++){ // This will search for the \n            //particular student\n            this.setState({person: data, loading: false})\n            if(data.user[i].roll==x || data.user[i].name.toLowerCase()==x.toLowerCase() || \n                data.user[i].registration==x || \n                data.user[i].phone==x ||\n                data.user[i].email==x)\n                {\n                    item.length=0;\n                    item.push(data.user[i]);\n                    // console.log(item[0]);\n            }\n        }\n    }\n    else if(x==null){ //It will load everyone's data initially\n        for(let i=data.user.length-1;i>=0;i--){\n            this.setState({person: data, loading: false})\n            item.push(data.user[i]);\n            // console.log(data.user[0])\n        }\n    }\n}\n\nasync delete(value,value2,value3){\n    const roll={roll: value}\n    const room={room:value2}\n    const rid={rid: value3}\n    const response = await axios.post('https://hms-nist.herokuapp.com/api/studentdelete',roll);\n    const response2 = await axios.post('https://hms-nist.herokuapp.com/api/roomdeallocate',rid);\n    window.location.reload(false);\n}\n\nrefreshPage(){\n    window.location.reload();\n} \n\nupdateInputValue(evt) {\n    this.setState({\n        inputValue: evt.target.value\n    });\n    }\n\nrender(){\n    \n    return <div>\n    <Header/>\n        <h1>Student Details</h1>\n        <input className=\"search-bar rounded-pill\" id=\"number\" type=\"text\"  placeholder=\" &#xf002;  Search\"\n        onChange={(evt) => {var x=evt.target.value; this.componentDidMount(x) }} />\n        <button class=\"clr-btn btn btn-dark rounded-pill\" onClick={this.refreshPage}>Clear</button><br/><br/>\n        {this.state.loading || !this.state.person ? \n        <div>loading...</div> \n        :\n        <div>        \n            <div className=\"tbl\">\n            <table className=\"sortable css-serial table table-borderless table-sm\" style={{width:\"80%\", textAlign:\"center\", margin:\"1% auto\"}}>\n                <thead>\n                    <tr style={{backgroundColor:\"#46244C\",color:\"white\"}}>\n                        <th>#</th>\n                        <th>Name</th>\n                        <th>Phone Number</th>\n                        <th>E-mail</th>\n                        <th>Address</th>\n                        <th>Gender</th>\n                        <th>DOB</th>\n                        <th>Aadhar Number</th>\n                        <th>Roll Number</th>\n                        <th>Registration Number</th>\n                        <th>Block</th>\n                        <th>Room</th>\n                        <th></th>\n                    </tr>\n                </thead>\n                <tbody>{item.map(student => \n                    <tr>\n                        <td></td>\n                        <td>{student.name}</td>\n                        <td>{student.phone}</td>\n                        <td>{student.email}</td>\n                        <td>{student.address}</td>\n                        <td>{student.gender}</td>\n                        <td>{student.dob}</td>\n                        <td>{student.aadhar}</td>\n                        <td>{student.roll}</td>\n                        <td>{student.registration}</td>\n                        <td>{student.block}</td>\n                        <td>{student.rid}</td>\n                        <td> <button className=\"btn btn-sm btn-light\" style={{paddingTop:\"4%\",marginTop:\"5%\"}}  onDoubleClick={()=>this.delete(student.roll,student.room,student.rid)}><i className=\"fas fa-ban\"></i> Remove</button><br/>\n                        </td>\n                    </tr>\n                    )}</tbody>\n            </table>\n            </div>\n            </div>\n        }\n    </div>\n}\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}