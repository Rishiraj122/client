{"ast":null,"code":"import _asyncToGenerator from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import axios from'axios';import{useHistory}from'react-router-dom';import{useState}from'react';import Header from'./Header.js';import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var item=[];var Fetch=/*#__PURE__*/function(_React$Component){_inherits(Fetch,_React$Component);var _super=_createSuper(Fetch);function Fetch(){var _this;_classCallCheck(this,Fetch);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true,person:null};return _this;}_createClass(Fetch,[{key:\"delete\",value:function(){var _delete2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){var nid,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:nid={nid:value};_context.next=3;return axios.post('https://hms-nist.herokuapp.com/api/noticedelete',nid);case 3:response=_context.sent;window.location.reload(false);case 5:case\"end\":return _context.stop();}}},_callee);}));function _delete(_x){return _delete2.apply(this,arguments);}return _delete;}()},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token,user,url,response,data,i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://To ensure the page is accessed by auth users\ntoken=localStorage.getItem('token');if(!token){user=jwt.decode(token);// for authentication\nwindow.location='/login';//if authentication fails load the login page\n}url=\"https://hms-nist.herokuapp.com/api/notice\";_context2.next=5;return fetch(url);case 5:response=_context2.sent;_context2.next=8;return response.json();case 8:data=_context2.sent;for(i=data.user.length-1;i>=-1;i--){this.setState({person:data,loading:false});item.push(data.user[i]);console.log(data.user[0]);}case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Notice Board\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Updates on upcoming events, important announcements and other reminders.\"}),/*#__PURE__*/_jsx(\"div\",{children:item.map(function(i){return/*#__PURE__*/_jsxs(\"div\",{class:\"alert notice-box\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"notice-title\",children:/*#__PURE__*/_jsx(\"strong\",{children:i.noticetitle})}),/*#__PURE__*/_jsx(\"hr\",{className:\"notice-hr\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"notice\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon fas fa-calendar fa-1x\"}),\" \",/*#__PURE__*/_jsx(\"i\",{children:i.date})]}),/*#__PURE__*/_jsx(\"p\",{className:\"notice-text\",children:i.notice}),/*#__PURE__*/_jsxs(\"p\",{className:\"notice\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"By\"}),\" \",/*#__PURE__*/_jsx(\"i\",{children:i.name})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"notice-btn btn btn-dark rounded-pill\",onDoubleClick:function onDoubleClick(){return _this2.delete(i.nid);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash fa-1x\"}),\" Delete\"]})]});})})]});}}]);return Fetch;}(React.Component);export{Fetch as default};","map":{"version":3,"names":["React","axios","useHistory","useState","Header","jwt","item","Fetch","state","loading","person","value","nid","post","response","window","location","reload","token","localStorage","getItem","user","decode","url","fetch","json","data","i","length","setState","push","console","log","map","noticetitle","date","notice","name","delete","Component"],"sources":["/Users/sherlock/Desktop/HMS copy/client/src/components/AdminNotice.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport { useState } from 'react';\nimport Header from './Header.js'\nimport jwt from 'jsonwebtoken'\n\nconst item=[];\n\nexport default class Fetch extends React.Component{\n\n    state={\n        loading: true,\n        person: null,\n    }\n\n    async delete(value){\n        const nid={nid: value}\n        const response = await axios.post('https://hms-nist.herokuapp.com/api/noticedelete',nid);\n        window.location.reload(false);\n    }\n\n    async componentDidMount(){\n        \n        //To ensure the page is accessed by auth users\n        const token = localStorage.getItem('token');\n        if(!token) {\n            const user = jwt.decode(token) // for authentication\n            window.location='/login'; //if authentication fails load the login page\n        }\n\n        const url=\"https://hms-nist.herokuapp.com/api/notice\";\n        const response = await fetch(url);\n        const data = await response.json();\n        for(let i=data.user.length-1;i>=-1;i--){\n            this.setState({person: data, loading: false})\n            item.push(data.user[i]);\n            console.log(data.user[0])\n        }\n    }\n\n    render(){\n        return <div>\n        <Header/>\n            <h1>Notice Board</h1>\n            <p>Updates on upcoming events, important announcements and other reminders.</p>\n            <div>{item.map(i => \n            <div class= \"alert notice-box\">\n                <h6 className=\"notice-title\"><strong>{i.noticetitle}</strong></h6>\n                <hr className=\"notice-hr\"/>\n                <p className=\"notice\"><i className=\"icon fas fa-calendar fa-1x\"></i> <i>{i.date}</i></p>\n                <p  className=\"notice-text\">{i.notice}</p>\n                <p  className=\"notice\"><strong>By</strong> <i>{i.name}</i></p>\n                <button className=\"notice-btn btn btn-dark rounded-pill\" onDoubleClick={()=>this.delete(i.nid)}><i className=\"fas fa-trash fa-1x\"></i> Delete</button>\n            </div>\n            )}</div> \n        </div>\n    }\n}"],"mappings":"iuBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,aAAnB,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,C,wFAEA,GAAMC,CAAAA,IAAI,CAAC,EAAX,C,GAEqBC,CAAAA,K,mUAEjBC,K,CAAM,CACFC,OAAO,CAAE,IADP,CAEFC,MAAM,CAAE,IAFN,C,uIAKN,iBAAaC,KAAb,mIACUC,GADV,CACc,CAACA,GAAG,CAAED,KAAN,CADd,uBAE2BV,CAAAA,KAAK,CAACY,IAAN,CAAW,iDAAX,CAA6DD,GAA7D,CAF3B,QAEUE,QAFV,eAGIC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB,EAHJ,sD,4MAMA,2KAEI;AACMC,KAHV,CAGkBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAHlB,CAII,GAAG,CAACF,KAAJ,CAAW,CACDG,IADC,CACMhB,GAAG,CAACiB,MAAJ,CAAWJ,KAAX,CADN,CACwB;AAC/BH,MAAM,CAACC,QAAP,CAAgB,QAAhB,CAA0B;AAC7B,CAEKO,GATV,CASc,2CATd,wBAU2BC,CAAAA,KAAK,CAACD,GAAD,CAVhC,QAUUT,QAVV,uCAWuBA,CAAAA,QAAQ,CAACW,IAAT,EAXvB,QAWUC,IAXV,gBAYI,IAAQC,CAAR,CAAUD,IAAI,CAACL,IAAL,CAAUO,MAAV,CAAiB,CAA3B,CAA6BD,CAAC,EAAE,CAAC,CAAjC,CAAmCA,CAAC,EAApC,CAAuC,CACnC,KAAKE,QAAL,CAAc,CAACnB,MAAM,CAAEgB,IAAT,CAAejB,OAAO,CAAE,KAAxB,CAAd,EACAH,IAAI,CAACwB,IAAL,CAAUJ,IAAI,CAACL,IAAL,CAAUM,CAAV,CAAV,EACAI,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACL,IAAL,CAAU,CAAV,CAAZ,EACH,CAhBL,8D,mIAmBA,iBAAQ,iBACJ,mBAAO,oCACP,KAAC,MAAD,IADO,cAEH,oCAFG,cAGH,+FAHG,cAIH,qBAAMf,IAAI,CAAC2B,GAAL,CAAS,SAAAN,CAAC,qBAChB,aAAK,KAAK,CAAE,kBAAZ,wBACI,WAAI,SAAS,CAAC,cAAd,uBAA6B,wBAASA,CAAC,CAACO,WAAX,EAA7B,EADJ,cAEI,WAAI,SAAS,CAAC,WAAd,EAFJ,cAGI,WAAG,SAAS,CAAC,QAAb,wBAAsB,UAAG,SAAS,CAAC,4BAAb,EAAtB,kBAAqE,mBAAIP,CAAC,CAACQ,IAAN,EAArE,GAHJ,cAII,UAAI,SAAS,CAAC,aAAd,UAA6BR,CAAC,CAACS,MAA/B,EAJJ,cAKI,WAAI,SAAS,CAAC,QAAd,wBAAuB,8BAAvB,kBAA2C,mBAAIT,CAAC,CAACU,IAAN,EAA3C,GALJ,cAMI,gBAAQ,SAAS,CAAC,sCAAlB,CAAyD,aAAa,CAAE,+BAAI,CAAA,MAAI,CAACC,MAAL,CAAYX,CAAC,CAACf,GAAd,CAAJ,EAAxE,wBAAgG,UAAG,SAAS,CAAC,oBAAb,EAAhG,aANJ,GADgB,EAAV,CAAN,EAJG,GAAP,CAeH,C,mBAhD8BZ,KAAK,CAACuC,S,SAApBhC,K"},"metadata":{},"sourceType":"module"}