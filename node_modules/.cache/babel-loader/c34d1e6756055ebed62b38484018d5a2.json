{"ast":null,"code":"import _asyncToGenerator from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{useHistory}from\"react-router-dom\";import Header from'./Header';import axios from'axios';import Sidebar from'react-sidebar';import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var item=[];var Fetch=/*#__PURE__*/function(_React$Component){_inherits(Fetch,_React$Component);var _super=_createSuper(Fetch);function Fetch(){var _this;_classCallCheck(this,Fetch);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true,person:null};return _this;}_createClass(Fetch,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,user,url,response,data,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://For auth access\ntoken=localStorage.getItem('token');if(!token){user=jwt.decode(token);// for authentication\nwindow.location.href=\"/login\";// history.push('/login'); //if authentication fails load the login page\n}//\nurl=\"https://hms-nist.herokuapp.com/api/clean\";_context.next=5;return fetch(url);case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;i=0;while(i<=data.user.length){this.setState({person:data,loading:false});if(true){item.push(data.user[i]);}i++;}// for(let i=0;i<data.user.length;i=i+1){\n//     this.setState({person: data, loading: false})\n//     item.push(data.user[i]);\n//     console.log(data.user[0]);\n//     // if(i==data.user.length-1){\n//     //     alert(yay)\n//     //     item.push(data.user[i+1]);\n//     // }\n// }\ncase 11:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"delete\",value:function(){var _delete2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value){var room,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:room={room:value};_context2.next=3;return axios.post('https://hms-nist.herokuapp.com/api/deleteclean',room);case 3:response=_context2.sent;window.location.reload(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));function _delete(_x){return _delete2.apply(this,arguments);}return _delete;}()},{key:\"goBack\",value:function goBack(){window.location.href=\"/staffdashboard\";}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Room Clean Requests\"}),/*#__PURE__*/_jsx(\"div\",{children:item.map(function(i){return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"2%\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Room:\"}),\" \",i.room,\", \",/*#__PURE__*/_jsx(\"strong\",{children:\"Message:\"}),i.clean]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light rounded-pill\",onClick:function onClick(){return _this2.delete(i.room);},children:\"Room Cleaned\"})]});})}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-control btn btn-dark rounded-pill\",onClick:function onClick(){return _this2.goBack();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\"  Go Back\"]})]});}}]);return Fetch;}(React.Component);export{Fetch as default};","map":{"version":3,"names":["React","useHistory","Header","axios","Sidebar","jwt","item","Fetch","state","loading","person","token","localStorage","getItem","user","decode","window","location","href","url","fetch","response","json","data","i","length","setState","push","value","room","post","reload","map","marginBottom","clean","delete","goBack","Component"],"sources":["/Users/sherlock/Desktop/HMS copy/client/src/components/RoomClean.js"],"sourcesContent":["import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Header from './Header'\nimport axios from 'axios';\nimport Sidebar from 'react-sidebar';\nimport jwt from 'jsonwebtoken'\n\nconst item=[];\n\nexport default class Fetch extends React.Component{\n\n    state={\n        loading: true,\n        person: null,\n    }\n\n    async componentDidMount(){\n\n        //For auth access\n        const token = localStorage.getItem('token');\n        if(!token) {\n            const user = jwt.decode(token) // for authentication\n            window.location.href=\"/login\"\n            // history.push('/login'); //if authentication fails load the login page\n        }\n        //\n\n        const url=\"https://hms-nist.herokuapp.com/api/clean\";\n        const response = await fetch(url);\n        const data = await response.json();\n        let i = 0;\n\n        while(i<=data.user.length){\n            this.setState({person: data, loading: false})\n            if(true){\n                item.push(data.user[i]);\n            }           \n            i++;\n        }\n\n        // for(let i=0;i<data.user.length;i=i+1){\n        //     this.setState({person: data, loading: false})\n            \n        //     item.push(data.user[i]);\n        //     console.log(data.user[0]);\n        //     // if(i==data.user.length-1){\n        //     //     alert(yay)\n        //     //     item.push(data.user[i+1]);\n        //     // }\n        // }\n    }\n\n    async delete(value){\n        const room={room: value}\n        const response = await axios.post('https://hms-nist.herokuapp.com/api/deleteclean',room);\n        window.location.reload(false);\n    }\n\n    goBack(){\n        window.location.href=\"/staffdashboard\"\n    }\n\n    render(){\n        return(\n            <div>\n                <Header/>\n                <h1>Room Clean Requests</h1>\n                <div>\n                    {item.map(i=>\n                    <div style={{marginBottom:\"2%\"}}>\n                         <p><strong>Room:</strong> {i.room}, <strong>Message:</strong>{i.clean}</p> \n                         <button className=\"btn btn-light rounded-pill\" onClick={()=>this.delete(i.room)}>Room Cleaned</button>\n                    </div>   \n                    )}\n                </div>\n                <button className=\"btn-control btn btn-dark rounded-pill\" onClick={()=>this.goBack()}><i className=\"fas fa-arrow-left\"></i>  Go Back</button>\n            </div>\n        )\n    }\n\n}\n"],"mappings":"iuBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,eAApB,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,C,wFAEA,GAAMC,CAAAA,IAAI,CAAC,EAAX,C,GAEqBC,CAAAA,K,mUAEjBC,K,CAAM,CACFC,OAAO,CAAE,IADP,CAEFC,MAAM,CAAE,IAFN,C,4JAKN,sKAEI;AACMC,KAHV,CAGkBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAHlB,CAII,GAAG,CAACF,KAAJ,CAAW,CACDG,IADC,CACMT,GAAG,CAACU,MAAJ,CAAWJ,KAAX,CADN,CACwB;AAC/BK,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,QAArB,CACA;AACH,CACD;AAEMC,GAXV,CAWc,0CAXd,uBAY2BC,CAAAA,KAAK,CAACD,GAAD,CAZhC,QAYUE,QAZV,qCAauBA,CAAAA,QAAQ,CAACC,IAAT,EAbvB,QAaUC,IAbV,eAcQC,CAdR,CAcY,CAdZ,CAgBI,MAAMA,CAAC,EAAED,IAAI,CAACT,IAAL,CAAUW,MAAnB,CAA0B,CACtB,KAAKC,QAAL,CAAc,CAAChB,MAAM,CAAEa,IAAT,CAAed,OAAO,CAAE,KAAxB,CAAd,EACA,GAAG,IAAH,CAAQ,CACJH,IAAI,CAACqB,IAAL,CAAUJ,IAAI,CAACT,IAAL,CAAUU,CAAV,CAAV,EACH,CACDA,CAAC,GACJ,CAED;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCJ,4D,mNAoCA,kBAAaI,KAAb,wIACUC,IADV,CACe,CAACA,IAAI,CAAED,KAAP,CADf,wBAE2BzB,CAAAA,KAAK,CAAC2B,IAAN,CAAW,gDAAX,CAA4DD,IAA5D,CAF3B,QAEUR,QAFV,gBAGIL,MAAM,CAACC,QAAP,CAAgBc,MAAhB,CAAuB,KAAvB,EAHJ,wD,uGAMA,iBAAQ,CACJf,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,iBAArB,CACH,C,sBAED,iBAAQ,iBACJ,mBACI,oCACI,KAAC,MAAD,IADJ,cAEI,2CAFJ,cAGI,qBACKZ,IAAI,CAAC0B,GAAL,CAAS,SAAAR,CAAC,qBACX,aAAK,KAAK,CAAE,CAACS,YAAY,CAAC,IAAd,CAAZ,wBACK,kCAAG,iCAAH,KAA2BT,CAAC,CAACK,IAA7B,mBAAoC,oCAApC,CAA8DL,CAAC,CAACU,KAAhE,GADL,cAEK,eAAQ,SAAS,CAAC,4BAAlB,CAA+C,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACC,MAAL,CAAYX,CAAC,CAACK,IAAd,CAAJ,EAAxD,0BAFL,GADW,EAAV,CADL,EAHJ,cAWI,gBAAQ,SAAS,CAAC,uCAAlB,CAA0D,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACO,MAAL,EAAJ,EAAnE,wBAAsF,UAAG,SAAS,CAAC,mBAAb,EAAtF,eAXJ,GADJ,CAeH,C,mBArE8BpC,KAAK,CAACqC,S,SAApB9B,K"},"metadata":{},"sourceType":"module"}