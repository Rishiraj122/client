{"ast":null,"code":"import _asyncToGenerator from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/sherlock/Desktop/HMS copy/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{useHistory}from\"react-router-dom\";import axios from'axios';import Header from'./Header.js';import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var item=[];var notAllotted=[];var searchData=[];var email='';var AllottedStudents=/*#__PURE__*/function(_React$Component){_inherits(AllottedStudents,_React$Component);var _super=_createSuper(AllottedStudents);function AllottedStudents(props){var _this;_classCallCheck(this,AllottedStudents);_this=_super.call(this,props);_this.state={loading:true,person:null};_this.state={inputValue:''};return _this;}_createClass(AllottedStudents,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(x){var token,user,url,response,data,i,_i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://To ensure it is auth\ntoken=localStorage.getItem('token');if(!token){user=jwt.decode(token);// for authentication\nwindow.location=\"/login\";//if authentication fails load the login page\n}//\nurl=\"https://hms-nist.herokuapp.com/api/studentlogin\";_context.next=5;return fetch(url);case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;if(x!=null){for(i=0;i<data.user.length;i++){// This will search for the \n//particular student\nthis.setState({person:data,loading:false});if(data.user[i].room==x||data.user[i].block==x||data.user[i].phone==x||data.user[i].name.toLowerCase()==x.toLowerCase()){item.length=0;item.push(data.user[i]);console.log(item[0]);}}}else if(x==null){//It will load everyone's data initially\nfor(_i=data.user.length-1;_i>=0;_i--){this.setState({person:data,loading:false});if(data.user[_i].room!=null){item.push(data.user[_i]);console.log(data.user[0]);}else if(data.user[_i].room==null){notAllotted.push(data.user[_i]);}}}case 10:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(_x){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"refreshPage\",value:function refreshPage(){window.location.reload();}},{key:\"updateInputValue\",value:function updateInputValue(evt){this.setState({inputValue:evt.target.value});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Allotted Students\"}),/*#__PURE__*/_jsx(\"input\",{class:\"search-bar rounded-pill\",type:\"text\",placeholder:\" \\uF002  Search\",onChange:function onChange(evt){var x=evt.target.value;_this2.componentDidMount(x);}}),/*#__PURE__*/_jsx(\"button\",{class:\"clr-btn btn btn-dark rounded-pill\",onClick:this.refreshPage,children:\"Clear\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"tbl\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"css-serial table table-borderless table-sm\",style:{width:\"60%\",margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:\"#46244C\",color:\"white\"},children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Roll Number\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Block\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Room\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:item.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{scope:\"row\",children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.roll}),/*#__PURE__*/_jsx(\"td\",{children:user.phone}),/*#__PURE__*/_jsx(\"td\",{children:user.block}),/*#__PURE__*/_jsx(\"td\",{children:user.rid})]});})})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Unallotted Students\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tbl\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"css-serial table table-borderless table-sm\",style:{width:\"60%\",textAlign:\"center\",margin:\"2% auto\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:\"#46244C\",color:\"white\"},children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Roll Number\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Aadhar\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Gender\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:notAllotted.map(function(user2){return/*#__PURE__*/_jsxs(\"tr\",{scope:\"row\",children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:user2.name}),/*#__PURE__*/_jsx(\"td\",{children:user2.roll}),/*#__PURE__*/_jsx(\"td\",{children:user2.phone}),/*#__PURE__*/_jsx(\"td\",{children:user2.aadhar}),/*#__PURE__*/_jsx(\"td\",{children:user2.gender})]});})})]})})]});}}]);return AllottedStudents;}(React.Component);export{AllottedStudents as default};","map":{"version":3,"names":["React","useState","useHistory","axios","Header","jwt","item","notAllotted","searchData","email","AllottedStudents","props","state","loading","person","inputValue","x","token","localStorage","getItem","user","decode","window","location","url","fetch","response","json","data","i","length","setState","room","block","phone","name","toLowerCase","push","console","log","reload","evt","target","value","componentDidMount","refreshPage","width","margin","backgroundColor","color","map","roll","rid","textAlign","user2","aadhar","gender","Component"],"sources":["/Users/sherlock/Desktop/HMS copy/client/src/components/AllottedStudents.js"],"sourcesContent":["import React, { useState } from 'react';\nimport {useHistory} from \"react-router-dom\";\nimport axios from 'axios';\nimport Header from './Header.js'\nimport jwt from 'jsonwebtoken'\n\nconst item=[];\nconst notAllotted=[];\nconst searchData=[];\nconst email='';\n\nexport default class AllottedStudents extends React.Component{\n    \n    constructor(props){\n        super(props);\n        this.state={\n            inputValue:'',\n        };\n    }\n\n    state={\n        loading: true,\n        person: null,\n    }\n\n    async componentDidMount(x){\n\n        //To ensure it is auth\n        const token = localStorage.getItem('token');\n        if(!token) {\n            const user = jwt.decode(token) // for authentication\n            window.location=\"/login\" //if authentication fails load the login page\n        }\n        //\n\n        const url=\"https://hms-nist.herokuapp.com/api/studentlogin\";\n        const response = await fetch(url);\n        \n        const data = await response.json();\n        if(x!=null){\n\n            for(let i=0;i<data.user.length;i++){ // This will search for the \n                //particular student\n                this.setState({person: data, loading: false})\n                if(data.user[i].room==x ||  \n                    data.user[i].block==x || \n                    data.user[i].phone==x ||\n                    data.user[i].name.toLowerCase()==x.toLowerCase())\n                    {\n                        item.length=0;\n                        item.push(data.user[i]);\n                        console.log(item[0]);\n                }\n            }\n        }\n        else if(x==null){ //It will load everyone's data initially\n            for(let i=data.user.length-1;i>=0;i--){\n                this.setState({person: data, loading: false})\n                if(data.user[i].room!=null){\n                    item.push(data.user[i]);\n                    console.log(data.user[0])\n                }\n                else if(data.user[i].room==null){\n                    notAllotted.push(data.user[i]);\n                }\n            }\n        }\n    }\n\n    refreshPage(){\n        window.location.reload();\n    } \n\n    updateInputValue(evt) {\n        this.setState({\n          inputValue: evt.target.value\n        });\n      }\n    \n    render(){\n        return <div>\n            <Header/>\n            <h1>Allotted Students</h1>\n\n            <input class=\"search-bar rounded-pill\" type=\"text\" placeholder=\" &#xf002;  Search\"\n            onChange={(evt) => {var x=evt.target.value; \n            this.componentDidMount(x) }} />\n\n            <button class=\"clr-btn btn btn-dark rounded-pill\" onClick={this.refreshPage}>Clear</button>\n            <br/><br/>\n                \n            <div className=\"tbl\">\n                    <table class=\"css-serial table table-borderless table-sm\" style={{width:\"60%\", margin:\"0 auto\"}}>\n                    <thead>\n                        <tr style={{backgroundColor:\"#46244C\",color:\"white\"}}>\n                            <th>#</th>\n                            <th scope=\"col\">Name</th>\n                            <th scope=\"col\">Roll Number</th>\n                            <th scope=\"col\">Phone Number</th>\n                            <th scope=\"col\">Block</th>\n                            <th scope=\"col\">Room</th>\n                        </tr>\n                    </thead>\n                        <tbody>{item.map(user => \n                            <tr scope=\"row\">\n                                <td></td>\n                                <td>{user.name}</td>\n                                <td>{user.roll}</td>\n                                <td>{user.phone}</td>\n                                <td>{user.block}</td>\n                                <td>{user.rid}</td>\n                            </tr>\n                        )}</tbody>             \n                    </table> \n                    </div>\n                    <br/><br/>               \n            \n            <h1>Unallotted Students</h1>\n            <div className=\"tbl\">\n                <table class=\"css-serial table table-borderless table-sm\" style={{width:\"60%\", textAlign:\"center\",margin:\"2% auto\"}}>\n                    <thead >\n                    <tr style={{backgroundColor:\"#46244C\",color:\"white\"}}>\n                        <th>#</th>\n                        <th scope=\"col\">Name</th>\n                        <th scope=\"col\">Roll Number</th>\n                        <th scope=\"col\">Phone Number</th>\n                        <th scope=\"col\">Aadhar</th>\n                        <th scope=\"col\">Gender</th>\n                    </tr>\n                </thead>\n                     <tbody>{notAllotted.map(user2 => \n                        <tr scope=\"row\">\n                            <td></td>\n                            <td>{user2.name}</td>\n                            <td>{user2.roll}</td>\n                            <td>{user2.phone}</td>\n                            <td>{user2.aadhar}</td>\n                            <td>{user2.gender}</td>\n                        </tr>\n                    )}</tbody>             \n                </table>   \n                </div>\n        </div>\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}